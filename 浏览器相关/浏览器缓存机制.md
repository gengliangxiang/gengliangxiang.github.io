# 浏览器缓存机制

##

## 强制缓存

- 浏览器在加载资源时，会先根据本地缓存资源的 header 中的信息判断是否命中强缓存，如果命中则直接使用缓存中的资源不会再向服务器发送请求
- 强缓存一般是这样一个流程：
  1. 查看 header 头中的 Expire 和 Cache-control 来判断是否满足规则；
  2. 如果满足规则，就返回缓存的数据；
  3. 如果不满足规则，就向服务器发送请求；
  4. 服务器返回数据；
  5. 将新数据存入缓存。

#### Expire

- expires 包含了一个时间，过了这个时间，响应将会失效
- GMT 表示的是格林威治时间，和北京时间相差 8 小时。
- 修改了客户端的本地时间,导致判断缓存失效

```
expires: Thu, 28 Oct 2021 05:24:44 GMT
```

#### Cache-Control

可以设置资源缓存的相对时间，还有其他属性设置

1. `max-age` 表示资源缓存的最大有效时间，这就是一个相对时间,单位是秒
2. `no-cache` 需要进行协商缓存，发送请求到服务器确认是否使用缓存。
3. `no-store` 禁止使用缓存，每一次都要重新请求数据。
4. `public` 默认设置。
5. `private` 不能被多用户共享。
6. 同时设置 `Expire` 和 `Cache-Control` ，`Cache-Control` 的优先级别更高。

[参考文章](https://mp.weixin.qq.com/s/Wvc0lkLpgyEW_u7bbMdvpQ)
